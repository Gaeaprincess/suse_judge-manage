(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b380a66"],{3e3:function(t,e,n){},"50fc":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return s}));n("d3b7"),n("159b");var i=n("b775"),a=function(){return new Promise((function(t,e){Object(i["a"])({url:"/onlinejudge/admin/manage/admin/gets/adminlist",method:"get"}).then((function(e){var n=[];e.data.forEach((function(t){n.push({CreatedAt:t.CreatedAt,UpdatedAt:t.UpdatedAt,id:t.id,admin_account:t.admin_account,admin_name:t.admin_name,Password:t.Password,admin_roles:t.admin_roles})})),t(n)}))}))},o=function(t){return new Promise((function(e,n){Object(i["a"])({url:"/onlinejudge/admin/manage/admin/add",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&n(t.msg),e(t.msg)}))}))},r=function(t){return new Promise((function(e,n){Object(i["a"])({url:"/onlinejudge/admin/manage/admin/update",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&n(t.msg),e(t.msg)}))}))},s=function(t){return new Promise((function(e,n){"admin"===t.admin_roles?n("最高管理员禁止删除"):Object(i["a"])({url:"/onlinejudge/admin/manage/admin/delete",method:"delete",data:JSON.stringify({delete_id:t.id})}).then((function(t){0!==t.code&&n(t.msg),e(t)}))}))}},"8ecc":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("admin-list",{attrs:{list:t.adminList},on:{deleteAdmin:t.deleteAdmin,addAdmin:t.addAdmin,updateAdmin:t.updateAdmin}}),n("add-admin",{ref:"addAdmin",on:{addAdmin:t.addAdminSubmit}}),n("update-admin",{ref:"updateAdmin",attrs:{ruleform:t.singleData,uid:t.activeUserId},on:{updateAdmin:t.updateAdminSubmit}})],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{attrs:{data:t.showList,height:"600",stripe:""}},[n("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"50",fixed:""}}),n("el-table-column",{attrs:{label:"账号",align:"center",prop:"admin_account",width:"100"}}),n("el-table-column",{attrs:{label:"姓名",align:"center",prop:"admin_name",width:"150"}}),n("el-table-column",{attrs:{label:"权限",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.admin_roles.split(" "),(function(e){return n("div",{key:e,staticClass:"tag-item"},[n("el-tag",{attrs:{type:"admin"===e&&1===t.roleid?"success":"warning"}},[t._v(t._s(e))])],1)}))}}])}),n("el-table-column",{attrs:{align:"right","min-width":"450"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("div",[n("el-button",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.addAdmin}},[t._v(" 添加管理员 ")]),n("el-input",{staticStyle:{width:"250px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"输入关键字搜索",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._e()]}},{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"medium",type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(n){return t.handleUpdate(e.$index,e.row)}}}),n("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)},r=[],s=(n("4de4"),n("ac1f"),n("841c"),n("caad"),n("2532"),{props:{list:{type:Array,default:function(){return[]}}},data:function(){return{singleData:[],search:"",roleid:1}},computed:{showList:function(){var t=this;return this.list.filter((function(e){return""===t.search||(!!e.admin_account.toLowerCase().includes(t.search.toLowerCase())||(!!e.admin_name.toLowerCase().includes(t.search.toLowerCase())||!!e.admin_roles.toLowerCase().includes(t.search.toLowerCase())))}))}},methods:{handleDelete:function(t,e){this.$emit("deleteAdmin",e)},handleUpdate:function(t,e){this.singleData=e,this.$emit("updateAdmin",e)},addAdmin:function(){this.$emit("addAdmin")}}}),l=s,d=(n("da38"),n("2877")),c=Object(d["a"])(l,o,r,!1,null,"01448741",null),m=c.exports,u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"新建管理员",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"账号:","label-width":"100px",prop:"admin_account"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.admin_account,callback:function(e){t.$set(t.form,"admin_account",e)},expression:"form.admin_account"}})],1),n("el-form-item",{attrs:{label:"姓名:","label-width":"100px",prop:"admin_name"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.admin_name,callback:function(e){t.$set(t.form,"admin_name",e)},expression:"form.admin_name"}})],1),n("el-form-item",{attrs:{label:"密码:","label-width":"100px",prop:"password"}},[n("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("el-form-item",{attrs:{label:"重复密码:","label-width":"100px",prop:"repassword"}},[n("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:t.form.repassword,callback:function(e){t.$set(t.form,"repassword",e)},expression:"form.repassword"}})],1),n("el-form-item",{attrs:{label:"角色:","label-width":"100px"}},[n("el-select",{attrs:{placeholder:"请选择管理员权限"},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}},t._l(t.options,(function(t){return n("el-option",{key:t.content,attrs:{label:t.content,value:t.content}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},f=[],p=(n("d3b7"),n("b775")),h=function(){return new Promise((function(t,e){Object(p["a"])({url:"/onlinejudge/admin/manage/admin/role/rolelist",method:"get"}).then((function(n){0!==n.code&&e(n.msg),t(n.data)})).catch((function(t){console.log(t)}))}))},b={data:function(){var t=this,e=function(t,e,n){if(!e)return n(new Error("Please input the adminAccount"));n()},n=function(t,e,n){if(!e)return n(new Error("Please input the adminName"));n()},i=function(e,n,i){""===n?i(new Error("Please input the password")):t.form.password.length<8?i(new Error("Length should be more 8")):(""!==t.form.repassword&&t.$refs.form.validateField("checkPass"),i())},a=function(e,n,i){""===n?i(new Error("Please input the password again")):n!==t.form.password?i(new Error("Two inputs don't match!")):i()};return{dialogVisible:!1,form:{admin_account:"",password:"",repassword:"",roles:"",admin_name:""},ruleform:{admin_account:"",password:"",roles:"",admin_name:""},options:[],formLabelWidth:"100px",rules:{password:[{validator:i,trigger:"blur"},{min:8,max:12}],repassword:[{validator:a,trigger:"blur"},{min:8,max:12}],admin_name:[{validator:n,trigger:"blur"}],admin_account:[{validator:e,trigger:"blur"}]}}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var t=this;h().then((function(e){t.options=e})).catch((function(t){console.log(t)}))},submit:function(){this.ruleform.admin_name=this.form.admin_name,this.ruleform.admin_account=this.form.admin_account,this.ruleform.password=this.form.password,this.ruleform.roles=this.form.roles,this.$emit("addAdmin",this.ruleform),this.dialogVisible=!1,this.form={}},cancel:function(){this.dialogVisible=!1,this.form={}}}},g=b,w=Object(d["a"])(g,u,f,!1,null,"4bb7e9fd",null),_=w.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"编辑管理员",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"账号:","label-width":"100px"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.admin_account,callback:function(e){t.$set(t.form,"admin_account",e)},expression:"form.admin_account"}})],1),n("el-form-item",{attrs:{label:"姓名:","label-width":"100px"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.admin_name,callback:function(e){t.$set(t.form,"admin_name",e)},expression:"form.admin_name"}})],1),n("el-form-item",{attrs:{label:"密码:","label-width":"100px"}},[n("el-input",{attrs:{autocomplete:"off",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("el-form-item",{attrs:{label:"角色:","label-width":"100px"}},[n("el-select",{attrs:{placeholder:"请选择管理员角色"},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}},t._l(t.options,(function(t){return n("el-option",{key:t.content,attrs:{label:t.content,value:t.content}})})),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},A=[],x=(n("a9e3"),{props:{ruleform:{type:Object,default:function(){return{}}},uid:{type:Number,default:0}},data:function(){return{dialogVisible:!1,form:{alter_id:0,admin_account:"",password:"",roles:"",admin_name:""},options:[],formLabelWidth:"100px"}},watch:{ruleform:function(t,e){this.form.alter_id=t.id,this.form.admin_account=t.admin_account,this.form.admin_name=t.admin_name,this.form.roles=t.admin_roles,this.form.password=t.password}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var t=this;h().then((function(e){t.options=e})).catch((function(t){console.log(t)}))},submit:function(){this.form.alert_id=this.uid,this.$emit("updateAdmin",this.form),this.form={},this.dialogVisible=!1}}}),y=x,$=Object(d["a"])(y,v,A,!1,null,"214d6d14",null),k=$.exports,L=n("50fc"),j={components:{AddAdmin:_,AdminList:m,UpdateAdmin:k},data:function(){return{singleData:{},adminList:[],activeUserId:null}},created:function(){this.getAdminLists()},methods:{getAdminLists:function(){var t=this;Object(L["c"])().then((function(e){t.adminList=e}))},addAdmin:function(){this.$refs.addAdmin.dialogVisible=!0},updateAdmin:function(t){this.singleData=t,this.activeUserId=t.id,this.$refs.updateAdmin.dialogVisible=!0},addAdminSubmit:function(t){var e=this;Object(L["a"])(t).then((function(t){e.$message({type:"success",message:t}),e.getAdminLists()})).catch((function(t){e.$message({type:"warning",message:t})}))},updateAdminSubmit:function(t){var e=this;Object(L["d"])(t).then((function(t){e.$message({type:"success",message:t}),e.getAdminLists()})).catch((function(t){e.$message({type:"warning",message:t})}))},deleteAdmin:function(t){var e=this;this.$confirm("此操作将删除该管理员, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){1!==t.ID?Object(L["b"])(t).then((function(t){e.getAdminLists(),e.$message({type:"success",message:t.msg})})).catch((function(t){e.$message({type:"warning",message:t})})):e.$message({type:"warning",message:"最高管理员禁止被删除"})})).catch((function(){e.$message({type:"info",message:"已取消"})}))}}},O=j,P=Object(d["a"])(O,i,a,!1,null,"705da666",null);e["default"]=P.exports},da38:function(t,e,n){"use strict";n("3000")}}]);