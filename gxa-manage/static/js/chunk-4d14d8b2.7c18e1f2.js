(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d14d8b2"],{"8f32":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("goods-list",{attrs:{list:t.showList},on:{search:t.search,deleteGoods:t.deleteGoods,addGoods:t.addGoods,updateGoods:t.updateGoods,updatePicture:t.updatePicture}}),o("pages",{attrs:{"total-pages":t.totalPages},on:{pageChange:t.pageChange}}),o("add-goods",{ref:"addGoods",on:{addGoods:t.addGoodsSubmit}}),o("update-goods",{ref:"updateGoods",attrs:{ruleform:t.singleData,uid:t.activeClickUserId},on:{updateGoods:t.updateGoodsSubmit}}),o("update-picture",{ref:"updatePicture",attrs:{ruleform:t.singleData},on:{updatePicture:t.updatePictureSubmit}})],1)},i=[],a=(o("fb6a"),o("4de4"),o("caad"),o("2532"),o("ac1f"),o("841c"),o("c40e")),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-table",{attrs:{data:t.list,"max-height":"800",stripe:""}},[o("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"50",fixed:""}}),o("el-table-column",{attrs:{align:"center",label:"商品名",prop:"goods_name",width:"100"}}),o("el-table-column",{attrs:{align:"center",label:"兑换价值",prop:"goods_value",width:"100"}}),o("el-table-column",{attrs:{align:"center",label:"库存",prop:"goods_count",width:"100"}}),o("el-table-column",{attrs:{align:"center",label:"商品类型",prop:"goods_type",width:"100"}}),o("el-table-column",{attrs:{align:"center",label:"商品描述",prop:"goods_description",width:"200"}}),o("el-table-column",{attrs:{label:"商品图片",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("a",{attrs:{href:"http://114.132.236.147:8001/onlinejudge"+t.row.goods_photo_url,target:"_blank"}},[o("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://114.132.236.147:8001/onlinejudge"+t.row.goods_photo_url,alt:"未找到图片"}})])]}}])}),o("el-table-column",{attrs:{align:"right","min-width":"300"},scopedSlots:t._u([{key:"header",fn:function(e){return[o("div",[o("el-button",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.addGoods}},[t._v(" 添加商品 ")]),o("el-input",{staticStyle:{width:"250px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"输入关键字搜索",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._e()]}},{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("修改图片")]),o("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(o){return t.handleUpdate(e.$index,e.row)}}},[t._v("修改内容")]),o("el-button",{attrs:{size:"medium",circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(o){return t.deleteGoods(e.$index,e.row)}}})]}}])})],1)},l=[],r={components:{},props:{list:{type:Array,default:function(){return[]}}},data:function(){return{value:!0,search:""}},watch:{search:function(t,e){this.$emit("search",t)}},methods:{handleEdit:function(t,e){this.$emit("updatePicture",e)},handleUpdate:function(t,e){this.$emit("updateGoods",e)},deleteGoods:function(t,e){this.$emit("deleteGoods",e)},addGoods:function(){this.$emit("addGoods")}}},d=r,u=o("2877"),c=Object(u["a"])(d,s,l,!1,null,"03497213",null),f=c.exports,m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-pagination",{ref:"page",attrs:{background:"","hide-on-single-page":!0,layout:"prev, pager, next",total:t.totalPages},on:{"current-change":t.handleCurrentChange}})},p=[],g=(o("a9e3"),{props:{totalPages:{type:Number,default:0}},methods:{handleCurrentChange:function(t){this.$emit("pageChange",t)}}}),h=g,b=(o("d49a"),Object(u["a"])(h,m,p,!1,null,"3c9d09a9",null)),_=b.exports,v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"添加商品",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"商品名:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_name,callback:function(e){t.$set(t.form,"goods_name",e)},expression:"form.goods_name"}})],1),o("el-form-item",{attrs:{label:"兑换价值:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_value,callback:function(e){t.$set(t.form,"goods_value",e)},expression:"form.goods_value"}})],1),o("el-form-item",{attrs:{label:"库存:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_count,callback:function(e){t.$set(t.form,"goods_count",e)},expression:"form.goods_count"}})],1),o("el-form-item",{attrs:{label:"商品类型:","label-width":"100px"}},[o("el-select",{attrs:{placeholder:"请选择商品类型"},model:{value:t.form.goods_type,callback:function(e){t.$set(t.form,"goods_type",e)},expression:"form.goods_type"}},t._l(t.options,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),o("el-form-item",{attrs:{label:"商品图片","label-width":"100px"}},[o("upload",{ref:"upload",on:{onChange:t.onChange}})],1),o("el-form-item",{attrs:{label:"商品描述:","label-width":"100px"}},[o("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.form.goods_description,callback:function(e){t.$set(t.form,"goods_description",e)},expression:"form.goods_description"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},y=[],w=o("a01c"),x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-upload",{ref:"uploads",staticClass:"upload-demo",attrs:{drag:"",multiple:"",action:"","auto-upload":!1,"on-change":t.onChange}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),o("em",[t._v("点击上传")])]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])},$=[],G={methods:{onChange:function(t,e){this.$emit("onChange",e)}}},P=G,j=Object(u["a"])(P,x,$,!1,null,"754a82ae",null),k=j.exports,C={components:{upload:k},data:function(){return{dialogVisible:!1,file:[],options:[],form:{goods_name:"",goods_count:"",goods_value:"",goods_type:"",photo:"",goods_description:""},formLabelWidth:"100px"}},created:function(){this.getTypeList()},methods:{onChange:function(t){this.file=t},submit:function(){this.form.photo=this.file[0].raw,this.$emit("addGoods",this.form),this.dialogVisible=!1,this.form={}},getTypeList:function(){var t=this;Object(w["c"])().then((function(e){for(var o=0;o<e.length;o++)t.options[o]=e[o].content}))}}},O=C,L=Object(u["a"])(O,v,y,!1,null,"72d50a2d",null),S=L.exports,V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"编辑公告",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"商品名称:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_name,callback:function(e){t.$set(t.form,"goods_name",e)},expression:"form.goods_name"}})],1),o("el-form-item",{attrs:{label:"商品描述:","label-width":"100px"}},[o("el-input",{attrs:{type:"textarea",autosize:"",autocomplete:"off"},model:{value:t.form.goods_description,callback:function(e){t.$set(t.form,"goods_description",e)},expression:"form.goods_description"}})],1),o("el-form-item",{attrs:{label:"商品价值:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_value,callback:function(e){t.$set(t.form,"goods_value",e)},expression:"form.goods_value"}})],1),o("el-form-item",{attrs:{label:"库存:","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.goods_count,callback:function(e){t.$set(t.form,"goods_count",e)},expression:"form.goods_count"}})],1),o("el-form-item",{attrs:{label:"商品类型:","label-width":"100px"}},[o("el-select",{attrs:{placeholder:"请选择商品类型"},model:{value:t.form.goods_type,callback:function(e){t.$set(t.form,"goods_type",e)},expression:"form.goods_type"}},t._l(t.options,(function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},I=[],N={props:{ruleform:{type:Object,default:function(){return{}}},uid:{type:Number,default:0}},data:function(){return{dialogVisible:!1,options:[],form:{alter_id:0,goods_name:"",goods_description:"",goods_value:"",goods_count:"",goods_type:""},formLabelWidth:"100px"}},watch:{ruleform:function(t,e){this.form.alter_id=t.id,this.form.goods_name=t.goods_name,this.form.goods_description=t.goods_description,this.form.goods_value=t.goods_value,this.form.goods_count=t.goods_count,this.form.goods_type=t.goods_type}},created:function(){this.getTypeList()},methods:{getTypeList:function(){var t=this;Object(w["c"])().then((function(e){for(var o=0;o<e.length;o++)t.options[o]=e[o].content}))},submit:function(){this.form.goods_count=parseInt(this.form.goods_count),this.form.goods_value=parseInt(this.form.goods_value),this.$emit("updateGoods",this.form),this.dialogVisible=!1}}},E=N,F=Object(u["a"])(E,V,I,!1,null,"6b06b470",null),U=F.exports,D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"编辑图片",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"图片","label-width":"100px"}},[o("upload",{ref:"upload",on:{onChange:t.onChange}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},J=[],A={components:{upload:k},props:{ruleform:{type:Object,default:function(){return{}}},uid:{type:Number,default:0}},data:function(){return{dialogFormVisible:!1,file:[],form:{alter_id:0,photo:""},formLabelWidth:"100px"}},watch:{ruleform:function(t,e){this.form.alter_id=t.id}},methods:{onChange:function(t,e){this.file=t},submit:function(){this.form.photo=this.file[0].raw,this.$emit("updatePicture",this.form),this.dialogFormVisible=!1,this.form={}}}},T=A,z=Object(u["a"])(T,D,J,!1,null,"49c8be63",null),W=z.exports,B={components:{AddGoods:S,GoodsList:f,Pages:_,UpdateGoods:U,UpdatePicture:W},data:function(){return{singleData:{},everyPageShowItemNumber:5,allGoodsList:[],totalPages:0,activePage:1,searchList:[],activeClickUserId:null}},computed:{showList:function(){return this.searchList.slice((this.activePage-1)*this.everyPageShowItemNumber,(this.activePage-1)*this.everyPageShowItemNumber+this.everyPageShowItemNumber)}},created:function(){this.getGoodsList()},methods:{search:function(t){this.searchList=this.allGoodsList.filter((function(e){return!!(""===t||e.goods_name.includes(t)||e.goods_type.includes(t)||e.goods_description.includes(t)||e.id===parseInt(t))})),this.totalPages=10*Math.ceil(this.searchList.length/this.everyPageShowItemNumber)},addGoods:function(){this.$refs.addGoods.dialogVisible=!0},addGoodsSubmit:function(t){var e=this;Object(a["a"])(t).then((function(t){e.$message({type:"success",message:t}),e.getGoodsList()})).catch((function(t){e.$message({type:"warning",message:t})}))},updateGoods:function(t){this.singleData=t,this.activeClickUserId=t.id,this.$refs.updateGoods.dialogVisible=!0},updateGoodsSubmit:function(t){var e=this;Object(a["d"])(t).then((function(t){e.getGoodsList(),e.$message({type:"success",message:t})})).catch((function(t){e.$message({type:"warning",message:t.msg})}))},updatePicture:function(t){this.singleData=t,this.activeUserId=t.id,this.$refs.updatePicture.dialogFormVisible=!0},updatePictureSubmit:function(t){var e=this;Object(a["e"])(t).then((function(t){e.$message({type:"success",message:t}),e.getGoodsList()})).catch((function(t){e.$message({type:"warning",message:t})}))},deleteGoods:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["b"])(t).then((function(t){e.getGoodsList(),e.$message({type:"success",message:"删除成功!"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},pageChange:function(t){this.activePage=t},getGoodsList:function(){var t=this;Object(a["c"])().then((function(e){t.totalPages=10*Math.ceil(e.length/t.everyPageShowItemNumber),t.allGoodsList=e,t.search("")})).catch((function(e){t.$message({type:"warning",message:e})}))}}},M=B,q=Object(u["a"])(M,n,i,!1,null,"6eba3393",null);e["default"]=q.exports},a01c:function(t,e,o){"use strict";o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return a})),o.d(e,"b",(function(){return s})),o.d(e,"d",(function(){return l}));o("d3b7");var n=o("b775"),i=function(){return new Promise((function(t,e){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/type/gets/goodstypelist",method:"get"}).then((function(o){0!==o.code&&e(o.msg),t(o.data)}))}))},a=function(t){return new Promise((function(e,o){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/type/add",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&o(t.msg),e(t.msg)}))}))},s=function(t){return new Promise((function(e,o){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/type/delete",method:"delete",data:JSON.stringify({delete_id:t.id})}).then((function(t){0!==t.code&&o(t.msg),e(t)}))}))},l=function(t){return new Promise((function(e,o){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/type/update",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&o(t.msg),e(t.msg)}))}))}},c40e:function(t,e,o){"use strict";o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return s})),o.d(e,"d",(function(){return l})),o.d(e,"b",(function(){return r})),o.d(e,"e",(function(){return d}));o("d3b7"),o("159b");var n=o("b775"),i=function(t,e){return n["a"].post(t,e,{headers:{"Content-type":"multipart/form-data"}})},a=function(){return new Promise((function(t,e){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/gets/goodslist",method:"get"}).then((function(e){var o=[];e.data.forEach((function(t){o.push({CreatedAt:t.CreatedAt,UpdatedAt:t.UpdatedAt,id:t.id,goods_name:t.goods_name,goods_value:t.goods_value,goods_count:t.goods_count,goods_type:t.goods_type,goods_photo_url:t.goods_photo_url,goods_description:t.goods_description})})),t(o)}))}))},s=function(t){return new Promise((function(e,o){var n=new FormData;n.append("goods_name",t.goods_name),n.append("goods_count",t.goods_count),n.append("goods_value",t.goods_value),n.append("goods_type",t.goods_type),n.append("photo",t.photo),n.append("goods_description",t.goods_description),i("/onlinejudge/admin/manage/goods/add",n).then((function(t){e(t.msg)})).then((function(t){0!==t.code&&o(t.msg),e(t.msg)}))}))},l=function(t){return new Promise((function(e,o){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/update",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&o(t.msg),e(t.msg)}))}))},r=function(t){return new Promise((function(e,o){Object(n["a"])({url:"/onlinejudge/admin/manage/goods/delete",method:"delete",data:JSON.stringify({delete_id:t.id})}).then((function(t){0!==t.code&&o(t.msg),e(t)}))}))},d=function(t){return new Promise((function(e,o){var n=new FormData;n.append("alter_id",t.alter_id),n.append("photo",t.photo),i("/onlinejudge/admin/manage/goods/picture/update",n).then((function(t){e(t.msg)})).catch((function(t){o(t.msg)}))}))}},d49a:function(t,e,o){"use strict";o("fa3a")},fa3a:function(t,e,o){}}]);