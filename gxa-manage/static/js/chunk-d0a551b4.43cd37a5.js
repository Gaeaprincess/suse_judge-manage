(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d0a551b4"],{"0bb4":function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return l}));n("d3b7"),n("159b");var i=n("b775"),a=function(t,e){return i["a"].post(t,e,{headers:{"Content-type":"multipart/form-data"}})},s=function(){return new Promise((function(t,e){Object(i["a"])({url:"/onlinejudge/admin/manage/announcement/gets/announcementlist",method:"get"}).then((function(e){var n=[];e.data.forEach((function(t){n.push({create_at:t.create_at,id:t.id,title:t.title,content:t.content,publisher:t.publisher,picture_url:t.picture_url})})),t(n)}))}))},o=function(t){return new Promise((function(e,n){var i=new FormData;i.append("title",t.title),i.append("content",t.content),i.append("picture",t.picture),a("/onlinejudge/admin/manage/announcement/add",i).then((function(t){e(t.msg)})).catch((function(t){n(t.msg)}))}))},r=function(t){return new Promise((function(e,n){Object(i["a"])({url:"/onlinejudge/admin/manage/announcement/update",method:"post",data:JSON.stringify(t)}).then((function(t){0!==t.code&&n(t.msg),e(t.msg)}))}))},c=function(t){return new Promise((function(e,n){Object(i["a"])({url:"/onlinejudge/admin/manage/announcement/delete",method:"delete",data:JSON.stringify({delete_id:t.id})}).then((function(t){0!==t.code&&n(t.msg),e(t)}))}))},l=function(t){return new Promise((function(e,n){var i=new FormData;i.append("alter_id",t.alter_id),i.append("title",t.title),i.append("picture",t.picture),a("/onlinejudge/admin/manage/announcement/picture/update",i).then((function(t){e(t.msg)})).catch((function(t){n(t.msg)}))}))}},"16d8":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:t.id}})},a=[],s=n("5530"),o=(n("b680"),n("a7be"),n("44f8"),n("a6e0"),n("547e")),r=n.n(o),c={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},l={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return c}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},c,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new r.a(Object(s["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},u=l,d=n("2877"),f=Object(d["a"])(u,i,a,!1,null,null,null);e["a"]=f.exports},4678:function(t,e,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=s(t);return n(e)}function s(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=s,t.exports=a,a.id="4678"},"61f3":function(t,e,n){"use strict";n("cf46")},9344:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("notice-list",{attrs:{list:t.showList},on:{search:t.search,deleteNotice:t.deleteNotice,updatePicture:t.updatePicture,updateNotice:t.updateNotice,deplayContent:t.deplayContent}}),n("pages",{attrs:{"total-pages":t.totalPages},on:{pageChange:t.pageChange}}),n("update-notice",{ref:"updateNotice",attrs:{ruleform:t.singleData,uid:t.activeUserId},on:{updateNotice:t.updateNoticeSubmit}}),n("update-picture",{ref:"updatePicture",attrs:{ruleform:t.singleData},on:{updatePicture:t.updatePictureSubmit}}),n("deplay-content",{ref:"deplayContent",attrs:{content:t.contentData}})],1)},a=[],s=(n("fb6a"),n("4de4"),n("caad"),n("2532"),n("ac1f"),n("841c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{attrs:{data:t.list,height:"600",stripe:""}},[n("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"50",fixed:""}}),n("el-table-column",{attrs:{label:"标题",align:"center",prop:"title",width:"150"}}),n("el-table-column",{attrs:{label:"发布者",align:"center",prop:"publisher",width:"150"}}),n("el-table-column",{attrs:{label:"发布时间",align:"center",prop:"create_at",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{"margin-left":"10px"},attrs:{type:"date"}},[t._v(t._s(e.row.create_at))])]}}])}),n("el-table-column",{attrs:{label:"公告内容",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.handleDeplay(e.$index,e.row)}}},[t._v("查看公告内容")])]}}])}),n("el-table-column",{attrs:{label:"公告图片",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("a",{attrs:{href:"http://114.132.236.147:8001/onlinejudge"+t.row.picture_url,target:"_blank"}},[n("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"http://114.132.236.147:8001/onlinejudge"+t.row.picture_url,alt:"空图片"}})])]}}])}),n("el-table-column",{attrs:{align:"right","min-width":"450"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("div",[n("el-input",{staticStyle:{width:"250px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"输入关键字搜索",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._e()]}},{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("修改图片")]),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return t.handleUpdate(e.$index,e.row)}}},[t._v("修改内容")]),n("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)}),o=[],r={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{singleData:[],search:"",roleid:1}},watch:{search:function(t,e){this.$emit("search",t)}},methods:{handleEdit:function(t,e){this.$emit("updatePicture",e)},handleDeplay:function(t,e){this.$emit("deplayContent",e)},handleDelete:function(t,e){this.$emit("deleteNotice",e)},handleUpdate:function(t,e){this.singleData=e,this.$emit("updateNotice",e)}}},c=r,l=(n("bb39"),n("2877")),u=Object(l["a"])(c,s,o,!1,null,"11b450b8",null),d=u.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-pagination",{ref:"page",attrs:{background:"","hide-on-single-page":!0,layout:"prev, pager, next",total:t.totalPages},on:{"current-change":t.handleCurrentChange}})},h=[],m=(n("a9e3"),{props:{totalPages:{type:Number,default:0}},methods:{handleCurrentChange:function(t){this.$emit("pageChange",t)}}}),b=m,p=(n("61f3"),Object(l["a"])(b,f,h,!1,null,"0bdb4cfe",null)),g=p.exports,j=n("c1df"),v=n.n(j),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"公告内容",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.closeDailog}},[n("div",{staticClass:"right-html",domProps:{innerHTML:t._s(t.html)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("markdown-editor",{ref:"markdownEditor",attrs:{language:"zh_CN",options:{hideModeSwitch:!0,previewStyle:"tab"}},model:{value:t.markcontent,callback:function(e){t.markcontent=e},expression:"markcontent"}}),n("el-button",{staticStyle:{"margin-top":"80px"},attrs:{type:"primary",icon:"el-icon-document"},on:{click:t.GetHtml}},[t._v(" Get HTML ")])],1)])},w=[],k=n("16d8"),_={components:{MarkdownEditor:k["a"]},props:{content:{type:Object,default:function(){return{}}}},data:function(){return{markcontent:"",html:"",dialogVisible:!1}},watch:{content:function(t,e){var n=this;this.markcontent=t.content,setTimeout((function(){n.GetHtml()}),200)}},methods:{closeDailog:function(){this.markcontent=""},GetHtml:function(){this.html=this.$refs.markdownEditor.getHtml()}}},N=_,x=Object(l["a"])(N,y,w,!1,null,"5e6f9b2a",null),$=x.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"编辑公告",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"标题:","label-width":"100px"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("el-form-item",{attrs:{label:"内容:","label-width":"100px"}},[n("mavon-editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},P=[],C={props:{ruleform:{type:Object,default:function(){return{}}},uid:{type:Number,default:0}},data:function(){return{dialogVisible:!1,form:{alter_id:0,title:"",content:""},formLabelWidth:"100px"}},watch:{ruleform:function(t,e){this.form.alter_id=t.id,this.form.title=t.title,this.form.content=t.content}},methods:{submit:function(){this.$emit("updateNotice",this.form),this.dialogVisible=!1}}},z=C,O=Object(l["a"])(z,S,P,!1,null,"1375c2c2",null),D=O.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"编辑图片",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"图片","label-width":"100px"}},[n("upload",{ref:"upload",on:{onChange:t.onChange}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},L=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-upload",{ref:"uploads",staticClass:"upload-demo",attrs:{drag:"",multiple:"",action:"","auto-upload":!1,"on-change":t.onChange}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])])},M=[],I={methods:{onChange:function(t,e){this.$emit("onChange",e)}}},H=I,U=Object(l["a"])(H,V,M,!1,null,"7092c983",null),F=U.exports,T={components:{upload:F},props:{ruleform:{type:Object,default:function(){return{}}},uid:{type:Number,default:0}},data:function(){return{dialogFormVisible:!1,file:[],form:{alter_id:0,title:"",picture:""},formLabelWidth:"100px"}},watch:{ruleform:function(t,e){this.form.alter_id=t.id,this.form.title=t.title}},methods:{onChange:function(t,e){this.file=t},submit:function(){this.form.picture=this.file[0].raw,this.$emit("updatePicture",this.form),this.dialogFormVisible=!1}}},q=T,G=Object(l["a"])(q,E,L,!1,null,"c448cece",null),J=G.exports,Y=n("0bb4"),B={components:{DeplayContent:$,NoticeList:d,Pages:g,UpdateNotice:D,UpdatePicture:J},data:function(){return{singleData:{},activePage:1,totalPages:0,everyPageShowItemNumber:4,contentData:{},allNoticeList:[],activeUserId:null,searchList:[]}},computed:{showList:function(){return this.searchList.slice((this.activePage-1)*this.everyPageShowItemNumber,(this.activePage-1)*this.everyPageShowItemNumber+this.everyPageShowItemNumber)}},created:function(){this.getNoticeLists()},methods:{search:function(t){this.searchList=this.allNoticeList.filter((function(e){return!!(""===t||e.title.includes(t)||e.content.includes(t)||e.id===parseInt(t)||e.publisher.includes(t))})),this.totalPages=10*Math.ceil(this.searchList.length/this.everyPageShowItemNumber)},pageChange:function(t){this.activePage=t},getNoticeLists:function(){var t=this;Object(Y["c"])().then((function(e){t.totalPages=10*Math.ceil(e.length/t.everyPageShowItemNumber),t.allNoticeList=e;for(var n=0;n<t.allNoticeList.length;n++)t.allNoticeList[n].create_at=v()(t.allNoticeList[n].create_at).format("YYYY-MM-DD HH:MM:SS");t.search("")}))},updateNotice:function(t){this.singleData=t,this.activeUserId=t.id,this.$refs.updateNotice.dialogVisible=!0},updateNoticeSubmit:function(t){var e=this;Object(Y["d"])(t).then((function(t){e.$message({type:"success",message:t}),e.getNoticeLists()})).catch((function(t){e.$message({type:"warning",message:t})}))},updatePicture:function(t){this.singleData=t,this.activeUserId=t.id,this.$refs.updatePicture.dialogFormVisible=!0},updatePictureSubmit:function(t){var e=this;Object(Y["e"])(t).then((function(t){e.$message({type:"success",message:t}),e.getNoticeLists()})).catch((function(t){e.$message({type:"warning",message:t})}))},deplayContent:function(t){this.activeUserId=t.id,this.contentData=t,this.$refs.deplayContent.dialogVisible=!0},deleteNotice:function(t){var e=this;this.$confirm("此操作将删除该公告, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(Y["b"])(t).then((function(t){e.getNoticeLists(),e.$message({type:"success",message:t.msg})})).catch((function(t){e.$message({type:"warning",message:t})}))})).catch((function(){e.$message({type:"info",message:"已取消"})}))}}},W=B,A=Object(l["a"])(W,i,a,!1,null,"480f84d6",null);e["default"]=A.exports},b5f1:function(t,e,n){},bb39:function(t,e,n){"use strict";n("b5f1")},cf46:function(t,e,n){}}]);