(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e44796c2"],{"5e07":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("carousel-list",{attrs:{list:e.showList},on:{search:e.search,deleteCarousel:e.deleteCarousel,addCarousel:e.addCarousel,updateCarousel:e.updateCarousel}}),a("pages",{attrs:{"total-pages":e.totalPages},on:{pageChange:e.pageChange}}),a("add-carousel",{ref:"addCarousel",on:{addCarousel:e.addCarouselSubmit}}),a("update-carousel",{ref:"updateCarousel",attrs:{ruleform:e.singleData,uid:e.activeClickUserId},on:{updateCarousel:e.updateCarouselSubmit}})],1)},n=[],s=(a("fb6a"),a("4de4"),a("caad"),a("2532"),a("ac1f"),a("841c"),a("7009")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("div",{staticStyle:{margin:"20px 20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCarousel}},[e._v("添加轮播图")])],1),e._l(e.list,(function(t,i){return a("el-col",{key:i,attrs:{span:8,offset:i>0?2:0}},[a("el-card",{staticStyle:{margin:"20px"},attrs:{"body-style":{padding:"5px"}}},[a("img",{staticClass:"image",attrs:{src:"http://114.132.236.147:8001/onlinejudge"+t.url,alt:"空图片",height:"200px"}}),a("div",{staticStyle:{padding:"14px","text-align":"center"}},[a("span",[e._v("比赛："),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.title))])],1),a("div",{staticClass:"bottom clearfix"},[a("el-button",{attrs:{type:"warning"},on:{click:function(a){return e.handleEdit(t)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t)}}},[e._v("删除")])],1)])])],1)}))],2)},o=[],l={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{search:""}},watch:{search:function(e,t){this.$emit("search",e)}},methods:{handleEdit:function(e){this.$emit("updateCarousel",e)},handleDelete:function(e){this.$emit("deleteCarousel",e)},addCarousel:function(){this.$emit("addCarousel")}}},u=l,c=(a("d3ae"),a("2877")),d=Object(c["a"])(u,r,o,!1,null,null,null),m=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{ref:"page",attrs:{background:"","hide-on-single-page":!0,layout:"prev, pager, next",total:e.totalPages},on:{"current-change":e.handleCurrentChange}})},h=[],p=(a("a9e3"),{props:{totalPages:{type:Number,default:0}},methods:{handleCurrentChange:function(e){this.$emit("pageChange",e)}}}),g=p,b=(a("9a00"),Object(c["a"])(g,f,h,!1,null,"09d97cc6",null)),C=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新建轮播图",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{"margin-top":"40px"},attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"相关比赛:","label-width":"100px"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入内容",maxlength:"20","show-word-limit":""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"图片","label-width":"100px"}},[a("upload",{ref:"upload",on:{onChange:e.onChange}})],1),a("el-form-item",{attrs:{align:"center"}},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},w=[],y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"uploads",staticClass:"upload-demo",attrs:{drag:"",multiple:"",action:"#","file-list":e.fileList,"auto-upload":!1,"on-change":e.onChange}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])},_=[],x={methods:{onChange:function(e,t){this.$emit("onChange",t)}}},$=x,P=Object(c["a"])($,y,_,!1,null,"5d678e20",null),j=P.exports,k={components:{upload:j},data:function(){return{dialogFormVisible:!1,file:[],form:{title:"",picture:""}}},methods:{onChange:function(e){this.file=e},submit:function(){this.form.picture=this.file[0].raw,this.$emit("addCarousel",this.form),this.dialogFormVisible=!1},resetForm:function(){this.form={}}}},F=k,I=Object(c["a"])(F,v,w,!1,null,"55907cb2",null),L=I.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"编辑轮播图",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{"margin-top":"40px"},attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"图片","label-width":"100px"}},[a("upload",{ref:"upload",on:{onChange:e.onChange}})],1),a("el-form-item",{attrs:{align:"center"}},[a("el-button",{on:{click:e.resetForm}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},D=[],O={components:{upload:j},props:{ruleform:{type:Object,default:function(){return{}}}},data:function(){return{dialogFormVisible:!1,file:[],form:{alert_id:"",title:"",picture:""}}},watch:{ruleform:function(e,t){this.form.alter_id=e.ID,this.form.title=e.title,this.form.picture=e.picture}},methods:{onChange:function(e){this.file=e},submit:function(){this.form.picture=this.file[0].raw,this.$emit("updateCarousel",this.form),this.dialogFormVisible=!1},resetForm:function(){this.form={}}}},V=O,E=Object(c["a"])(V,S,D,!1,null,"1cf220fc",null),A=E.exports,N={components:{Pages:C,CarouselList:m,AddCarousel:L,UpdateCarousel:A},data:function(){return{singleData:{},everyPageShowItemNumber:2,allCarouselList:[],totalPages:0,activePage:1,searchList:[],activeClickUserId:null}},computed:{showList:function(){return this.searchList.slice((this.activePage-1)*this.everyPageShowItemNumber,(this.activePage-1)*this.everyPageShowItemNumber+this.everyPageShowItemNumber)}},created:function(){this.getCarouselList()},methods:{search:function(e){this.searchList=this.allCarouselList.filter((function(t){return!(""!==e&&!t.title.includes(e)&&t.ID!==parseInt(e))})),this.totalPages=10*Math.ceil(this.searchList.length/this.everyPageShowItemNumber)},addCarousel:function(){this.$refs.addCarousel.dialogFormVisible=!0},addCarouselSubmit:function(e){var t=this;Object(s["a"])(e).then((function(e){t.$message({type:"success",message:e}),t.getCarouselList()})).catch((function(e){t.$message({type:"warning",message:e})}))},updateCarousel:function(e){this.singleData=e,this.activeClickUserId=e.ID,this.$refs.updateCarousel.dialogFormVisible=!0},updateCarouselSubmit:function(e){var t=this;Object(s["d"])(e).then((function(e){t.$message({type:"success",message:e}),t.getCarouselList()})).catch((function(e){t.$message({type:"warning",message:e.msg})}))},deleteCarousel:function(e){var t=this;this.$confirm("此操作将永久删除该轮播图, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(e).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getCarouselList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},pageChange:function(e){this.activePage=e},getCarouselList:function(){var e=this;Object(s["c"])().then((function(t){e.totalPages=10*Math.ceil(t.length/e.everyPageShowItemNumber),e.allCarouselList=t,e.search("")})).catch((function(t){e.$message({type:"warning",message:t})}))}}},U=N,J=Object(c["a"])(U,i,n,!1,null,"1b98d5ee",null);t["default"]=J.exports},7009:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return l}));a("d3b7"),a("159b");var i=a("b775"),n=function(e,t){return i["a"].post(e,t,{headers:{"Content-type":"multipart/form-data"}})},s=function(){return new Promise((function(e,t){Object(i["a"])({url:"/onlinejudge/admin/manage/slideshow/gets/slideshowlist",method:"get"}).then((function(t){var a=[];t.data.forEach((function(e){a.push({CreatedAt:e.CreatedAt,UpdatedAt:e.UpdatedAt,ID:e.ID,DeleteAt:e.DeleteAt,url:e.url,title:e.title})})),e(a)}))}))},r=function(e){return new Promise((function(t,a){var i=new FormData;i.append("title",e.title),i.append("picture",e.picture),n("/onlinejudge/admin/manage/slideshow/add",i).then((function(e){t(e.msg)})).then((function(e){a(e.msg)}))}))},o=function(e){return new Promise((function(t,a){var i=new FormData;i.append("alter_id",e.alter_id),i.append("title",e.title),i.append("picture",e.picture),n("/onlinejudge/admin/manage/slideshow/update",i).then((function(e){t(e.msg)})).then((function(e){a(e.msg)}))}))},l=function(e){return new Promise((function(t,a){Object(i["a"])({url:"/onlinejudge/admin/manage/slideshow/delete",method:"delete",data:JSON.stringify({delete_id:e.ID})}).then((function(e){0!==e.code&&a(e.msg),t(e)}))}))}},7662:function(e,t,a){},"9a00":function(e,t,a){"use strict";a("ceb1")},ceb1:function(e,t,a){},d3ae:function(e,t,a){"use strict";a("7662")}}]);